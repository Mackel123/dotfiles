#!/bin/bash

# set codesigning certificate name here (default: yabai-cert)
export SPACEBAR_CERT=

# stop yabai
printf "\n************** Stop spacebar ... ****************\n"
brew services stop somdoron/formulae/spacebar

# reinstall spacebar
printf "\n************** Reinstall spacebar ... ****************\n"
brew reinstall somdoron/formulae/spacebar
codesign -fs "${SPACEBAR_CERT:-spacebar-cert}" "$(brew --prefix spacebar)/bin/spacebar"

# start spacebar
printf "\n************** Start spacebar ... ****************\n"
brew services start somdoron/formulae/spacebar
